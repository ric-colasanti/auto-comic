<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Robots</title>

    <style>
        #rarm {
            transform: scaleX(-.1);
        }

        svg {
            font-family: "Helvetica", "Arial", sans-serif;
        }
    </style>
</head>

<body>
    <svg id="svg01" width="540" height="300" style="border-style: solid;">
    </svg>
    <textarea id="textarea1" rows="18" cols="40">
living.jpg
red,blue 
1"We are the robots":eyesdown:happy
2"You can program us by typing commands in to the text box on the right":eyesright
1"You run the program by clicking the submit button below"
2"Now on with the show"</textarea> <br>
    <button onclick="submitText('svg01','textarea1')">Submit</button><br>
    <br>
    <svg id="svg02" width="540" height="300" style="border-style: solid;">
    </svg>
    <textarea id="textarea2" rows="18" cols="40">
kitchen.png 
blue,red
1"Red why are you so sad?":eyesright:headright
2"Two of my favourite numbers have had a fight":sad:eyesleft
1"Who are they?"
2"19 and 20"
1"What happened?"</textarea> <br>
    <button onclick="submitText('svg02','textarea2')">Submit</button><br>
    <br>
    <svg id="svg03" width="540" height="300" style="border-style: solid;">
    </svg>
    <textarea id="textarea3" rows="18" cols="40">
kitchen.png 
blue,red
2"21":eyesleft:headleft
1"?":cross:eyesright:headleft</textarea> <br>
    <button onclick="submitText('svg03','textarea3')">Submit</button><br>
    <br>
    <svg id="svg04" width="540" height="300" style="border-style: solid;">
    </svg>
    <textarea id="textarea4" rows="18" cols="40">
kitchen.png 
blue,red
2"Twenty Won !!":happy:eyesleft:headleft
1"Ha Ha Ha!":happy:eyesup</textarea> <br>
    <button onclick="submitText('svg04','textarea4')">Submit</button><br>
<br>
<p>This work took insparation from <a href="https://www.kesiev.com/stripthis/">Strip this</a></p>
<p>A large part of the SVG coding for the Robots was taken from <a href="https://codepen.io/wattenberger/pen/Bksoc">Wattenberger</a>. Many thanks. </p>
<p>The <a href="https://www.beano.com/posts/number-jokes">BEANO</a> was the basis of the number joke.</p>
<p>The backgrounds are open source from <a href="https://www.needpix.com/photo/514692/kitchen-room-kitchen-interior-appliance-furnitures-cupboard-cabinets-stove-table">Needpix</a> and <a href="https://www.nextdayblinds.com/ndb-flickr/">NextDayBlinds.</a></p>
</body>
<script src="js/robot.js"></script>
<script>
    function submitText(svgId, textId) {
        var elm = document.getElementById(svgId);
        var frame = SVG("g");
        while (frame.firstChild) {
            frame.removeChild(frame.firstChild);
        }
        elm.appendChild(frame)
        var textAreas = document.getElementById(textId);
        var robot1 = new Robot("#94627D", "#657F8E", "thin")
        var robot2 = new Robot("#6469AD", "#009a9E", "fat")
        var comic = textAreas.value.split('\n')
        var bground = SVG("image")
        console.log("../img/"+comic[0])
        bground.setAttribute('href', "img/"+comic[0]);
        bground.setAttribute("width", "100%")
        frame.appendChild(bground)
        chars = comic[1].split(",")
        var pos = 10
        var robots = []
        var c = 0
        for (c = 0; c < chars.length; c++) {
            if (chars[c] == "red") {
                frame.appendChild(robot1.robotGroup)
                height = robot1.robotGroup.getBBox().height
                robot1.position(height, pos, 300)
                robots[c] = robot1
            } else {
                frame.appendChild(robot2.robotGroup)
                height = robot2.robotGroup.getBBox().height
                robot2.position(height, pos, 300)
                robots[c] = robot2
            }
            pos = 370
        }
        pos = 10
        for (i = 2; i < comic.length; i++) {
            scomic = comic[i].split('"');
            var itm = parseInt(scomic[0] - 1)
            if(robots[itm]!=undefined){
                var speechBubble = new SpeechBubble(scomic[1], robots[itm].bodyColor)

                frame.appendChild(speechBubble.group)
                var xPos = 160
                if (itm == 1) {
                    xPos = 190
                }
                speechBubble.group.setAttribute("transform", "translate(" + xPos + "," + pos + ")")
                pos += speechBubble.group.getBBox().height + 20
                expressions = comic[i].split(":")
                for (e in expressions) {
                    robots[itm].expression(expressions[e]);
                }
            }
        }    

    }
    submitText("svg01","textarea1");
    submitText("svg02","textarea2");
    submitText("svg03","textarea3");
    submitText("svg04","textarea4");
</script>

</html>